<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // function isImageFile(filename) {
      //   // gif
      //   const imageRegex = /\.(jpe?g|png|bmp|webp|svg|ico)$/i
      //   return imageRegex.test(filename)
      // }

      // function isWebImageUrl(url) {
      //   const regex = /^https?:\/\/.+(\.(jpe?g|png|bmp|webp|svg|ico))(\?[^#]*)?(#.*)?$/i
      //   return regex.test(url)
      // }

      // 提取图片后缀为常量数组
      const IMAGE_EXTENSIONS = ['jpe?g', 'png', 'bmp', 'webp', 'svg', 'ico']

      // 将数组转换为正则表达式需要的字符串格式
      const IMAGE_EXTENSIONS_STR = IMAGE_EXTENSIONS.join('|')

      function isImageFile(filename) {
        const imageRegex = new RegExp(`\\.(${IMAGE_EXTENSIONS_STR})$`, 'i')
        return imageRegex.test(filename)
      }
      console.log(new RegExp(`\\.(${IMAGE_EXTENSIONS_STR})$`, 'i'))

      function isWebImageUrl(url) {
        const regex = new RegExp(
          `^https?://.+(\\.(${IMAGE_EXTENSIONS_STR}))(\\?[^#]*)?(#.*)?$`,
          'i',
        )
        return regex.test(url)
      }
      console.log(new RegExp(`^https?://.+(\\.(${IMAGE_EXTENSIONS_STR}))(\\?[^#]*)?(#.*)?$`, 'i'))
    </script>
  </body>
</html>
